<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Documentação da API Cartão Tudo Ok</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <style>
    details summary { cursor: pointer; font-weight: bold; }
    pre { background: #f3f4f6; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; }
  </style>
</head>
<body class="bg-gray-100">
  <div class="container mx-auto p-4">
    <nav class="bg-blue-600 text-white p-4 mb-8 rounded-lg">
      <h1 class="text-2xl font-bold">Documentação da API - Cartão Tudo Ok</h1>
    </nav>
    <h2 class="text-3xl font-bold text-center mb-6">Documentação da API do Cartão Tudo Ok</h2>
    <p class="text-gray-700 text-center mb-8">Esta documentação detalha os endpoints da API do sistema de assinaturas.</p>

    <!-- Conclusão -->
    <div class="bg-white p-6 rounded-lg shadow-md mb-6">
      <h2 class="text-xl font-semibold mb-2">Conclusão sobre IDs de 7 Dígitos</h2>
      <p class="text-gray-700 mb-4">
        Após análise, os IDs de 7 dígitos encontrados são:
      </p>
      <ul class="list-disc pl-6 mb-4">
        <li><strong>Webhook</strong>: <code>bill_items[*].product.id</code>: 1128644, 1181275, 1181273, 1181272, 1211342, 1181274.</li>
        <li><strong>Assinaturas</strong>: <code>bills.plan_id</code>: 333188.</li>
        <li><strong>ErrorLog</strong>: <code>data.plan_id</code>: 333188.</li>
        <li><strong>PacienteVendaAssistida</strong>: <code>assinatura.plan.id</code>, <code>plano.id</code>: 333187; <code>assinatura.product_items[*].product.id</code>, <code>produtos[*].id</code>, <code>webHookBill.bill_items[*].product.id</code>: 1128644, 1181276, 1181275, 1181273, 1181272, 1211342, 1181274.</li>
        <li><strong>Plano</strong>: <code>id</code>: 333187.</li>
      </ul>
      <p class="text-gray-700 mb-4">
        <strong>Análise</strong>: <code>1128644</code>, <code>1181275</code>, <code>1181273</code>, <code>1181272</code>, <code>1211342</code>, <code>1181274</code> são compartilhados entre Webhook e PacienteVendaAssistida (mesmos produtos). <code>333188</code> é compartilhado entre Assinaturas e ErrorLog (mesmo plano). <code>333187</code> é compartilhado entre PacienteVendaAssistida e Plano (mesmo plano). <code>1181276</code> aparece em múltiplos objetos de PacienteVendaAssistida (ex.: <code>assinatura.product_items[0].product.id</code>, <code>produtos[0].id</code>), referindo-se ao produto "Sem taxa de adesão".
      </p>
      <p class="text-gray-700">
        <strong>Conclusão</strong>: Não existem IDs de 7 dígitos únicos na API. Todos os IDs ou se repetem dentro de PacienteVendaAssistida (<code>1181276</code>) ou são compartilhados entre entidades (<code>1128644</code>, <code>1181275</code>, <code>1181273</code>, <code>1181272</code>, <code>1211342</code>, <code>1181274</code>, <code>333187</code>, <code>333188</code>).
      </p>
    </div>

    <!-- Entidades em Dropdowns -->
    <details class="mb-4">
      <summary class="text-lg font-semibold bg-gray-200 p-2 rounded-lg">Webhook - Evento de Fatura Paga</summary>
      <div class="bg-white p-4 rounded-lg shadow-md mt-2">
        <p class="text-gray-700 mb-4">Fornece informações sobre faturas pagas, incluindo cliente, pagamento e assinatura.</p>
        <h3 class="text-lg font-semibold mb-2">Exemplo de Resposta</h3>
        <pre>{
  "email": "rosa2011rodrigues@hotmail.com",
  "event": {
    "created_at": "2024-01-13T08:55:11.293-03:00",
    "data": {
      "bill": {
        "amount": "35.9",
        "bill_items": [
          {
            "amount": "35.9",
            "id": 325304488,
            "product": {
              "id": 1128644,
              "name": "(01) Mensal - Sem taxa adesão"
            }
          }
        ]
      }
    }
  }
}</pre>
      </div>
    </details>

    <details class="mb-4">
      <summary class="text-lg font-semibold bg-gray-200 p-2 rounded-lg">Assinaturas - Lista de Faturas</summary>
      <div class="bg-white p-4 rounded-lg shadow-md mt-2">
        <p class="text-gray-700 mb-4">Retorna informações sobre faturas de uma assinatura, incluindo cliente e plano.</p>
        <h3 class="text-lg font-semibold mb-2">Exemplo de Resposta</h3>
        <pre>{
  "bills": [
    {
      "createdAt": "2025-02-24T15:53:57.000-03:00",
      "customer_id": 95427883,
      "plan_id": 333188
    }
  ],
  "usuario": {
    "email": "nicenecy@yahoo.com.br",
    "id": 95427883,
    "metadata": {
      "name": "JOSENICE SOARES DA SILVA"
    }
  }
}</pre>
      </div>
    </details>

    <details class="mb-4">
      <summary class="text-lg font-semibold bg-gray-200 p-2 rounded-lg">Autenticação - Dados do Usuário</summary>
      <div class="bg-white p-4 rounded-lg shadow-md mt-2">
        <p class="text-gray-700 mb-4">Fornece informações para autenticação de usuários.</p>
        <h3 class="text-lg font-semibold mb-2">Exemplo de Resposta</h3>
        <pre>{
  "email": "teste@gmail.com",
  "id": "9UApWt2NrTyC7jqpahNq",
  "password": "963963"
}</pre>
      </div>
    </details>

    <details class="mb-4">
      <summary class="text-lg font-semibold bg-gray-200 p-2 rounded-lg">Carterinha - Informações do Beneficiário</summary>
      <div class="bg-white p-4 rounded-lg shadow-md mt-2">
        <p class="text-gray-700 mb-4">Retorna dados da carteirinha de um beneficiário.</p>
        <h3 class="text-lg font-semibold mb-2">Exemplo de Resposta</h3>
        <pre>{
  "cpf": "34383433472",
  "id": "002Rdvdk79ZzOtXsQA979C5aYWg1",
  "nome": "maria alaide dos passos",
  "validade": "28/04/2026"
}</pre>
      </div>
    </details>

    <details class="mb-4">
      <summary class="text-lg font-semibold bg-gray-200 p-2 rounded-lg">Endereço - Dados de Endereço</summary>
      <div class="bg-white p-4 rounded-lg shadow-md mt-2">
        <p class="text-gray-700 mb-4">Fornece informações sobre o endereço de um paciente.</p>
        <h3 class="text-lg font-semibold mb-2">Exemplo de Resposta</h3>
        <pre>{
  "address": "Rua General Polidoro",
  "cep": "50740-050",
  "city": {
    "name": "RECIFE",
    "neighborhood": "Várzea"
  },
  "state": {
    "name": "PE"
  }
}</pre>
      </div>
    </details>

    <details class="mb-4">
      <summary class="text-lg font-semibold bg-gray-200 p-2 rounded-lg">ErrorLog - Registro de Erros</summary>
      <div class="bg-white p-4 rounded-lg shadow-md mt-2">
        <p class="text-gray-700 mb-4">Registra erros durante operações, como falhas em consultas.</p>
        <h3 class="text-lg font-semibold mb-2">Exemplo de Resposta</h3>
        <pre>{
  "data": {
    "customer_id": 73733174,
    "plan_id": 333188
  },
  "error": {
    "errors": [
      {
        "id": "invalid_parameter",
        "message": "inválido(a)",
        "parameter": "query"
      }
    ]
  }
}</pre>
      </div>
    </details>

    <details class="mb-4">
      <summary class="text-lg font-semibold bg-gray-200 p-2 rounded-lg">Ordem - Dados de Ordem de Pagamento</summary>
      <div class="bg-white p-4 rounded-lg shadow-md mt-2">
        <p class="text-gray-700 mb-4">Fornece informações sobre ordens de pagamento.</p>
        <h3 class="text-lg font-semibold mb-2">Exemplo de Resposta</h3>
        <pre>{
  "cartaoId": "32",
  "customerId": "21",
  "id": "EkrjISJNjN08SXu2Lqrs",
  "validity": "22/08/2099"
}</pre>
      </div>
    </details>

    <details class="mb-4">
      <summary class="text-lg font-semibold bg-gray-200 p-2 rounded-lg">Paciente - Informações do Paciente</summary>
      <div class="bg-white p-4 rounded-lg shadow-md mt-2">
        <p class="text-gray-700 mb-4">Retorna dados de pacientes, incluindo CPF e email.</p>
        <h3 class="text-lg font-semibold mb-2">Exemplo de Resposta</h3>
        <pre>{
  "cpf": "34383433472",
  "email": "mariaalide23@gmail.com",
  "nome": "maria alaide dos passos",
  "status": true
}</pre>
      </div>
    </details>

    <details class="mb-4">
      <summary class="text-lg font-semibold bg-gray-200 p-2 rounded-lg">PacienteVendaAssistida - Assinatura com Venda Assistida</summary>
      <div class="bg-white p-4 rounded-lg shadow-md mt-2">
        <p class="text-gray-700 mb-4">Detalha assinaturas com venda assistida, incluindo fatura e plano.</p>
        <h3 class="text-lg font-semibold mb-2">Exemplo de Resposta</h3>
        <pre>{
  "assinatura": {
    "bill": {
      "amount": "329.9",
      "payment_method": {
        "code": "credit_card",
        "name": "Cartão de crédito"
      }
    },
    "subscription": {
      "plan": {
        "id": 333187,
        "name": "(01) Saúde Básica - anual"
      },
      "product_items": [
        {
          "product": {
            "id": 1181276,
            "name": "(01) Sem taxa de adesão"
          }
        }
      ]
    }
  }
}</pre>
      </div>
    </details>

    <details class="mb-4">
      <summary class="text-lg font-semibold bg-gray-200 p-2 rounded-lg">Parâmetros - Configurações do Sistema</summary>
      <div class="bg-white p-4 rounded-lg shadow-md mt-2">
        <p class="text-gray-700 mb-4">Retorna parâmetros de configuração do sistema.</p>
        <h3 class="text-lg font-semibold mb-2">Exemplo de Resposta</h3>
        <pre>{
  "maxDias": 180
}</pre>
      </div>
    </details>

    <details class="mb-4">
      <summary class="text-lg font-semibold bg-gray-200 p-2 rounded-lg">Plano - Detalhes do Plano</summary>
      <div class="bg-white p-4 rounded-lg shadow-md mt-2">
        <p class="text-gray-700 mb-4">Fornece informações sobre um plano, como ID e nome.</p>
        <h3 class="text-lg font-semibold mb-2">Exemplo de Resposta</h3>
        <pre>{
  "id": "333187",
  "nome": "(01) Saúde Básica - anual",
  "juros": 358.8
}</pre>
      </div>
    </details>

    <details class="mb-4">
      <summary class="text-lg font-semibold bg-gray-200 p-2 rounded-lg">Relatório - Ações do Sistema</summary>
      <div class="bg-white p-4 rounded-lg shadow-md mt-2">
        <p class="text-gray-700 mb-4">Registra ações realizadas no sistema.</p>
        <h3 class="text-lg font-semibold mb-2">Exemplo de Resposta</h3>
        <pre>{
  "action": "disable",
  "date": "2025-04-07T08:47:24.000-03:00",
  "email": "marciabys80@gmail.com"
}</pre>
      </div>
    </details>

    <details class="mb-4">
      <summary class="text-lg font-semibold bg-gray-200 p-2 rounded-lg">Users - Informações de Usuários</summary>
      <div class="bg-white p-4 rounded-lg shadow-md mt-2">
        <p class="text-gray-700 mb-4">Retorna dados de usuários do sistema.</p>
        <h3 class="text-lg font-semibold mb-2">Exemplo de Resposta</h3>
        <pre>{
  "email": "comercial@okdoutor.com",
  "name": "AMANDA DIDIER",
  "perfil": "Admin",
  "status": false
}</pre>
      </div>
    </details>

    <script type="text/javascript">
      var gk_isXlsx = false;
      var gk_xlsxFileLookup = {};
      var gk_fileData = {};
      function filledCell(cell) {
        return cell !== '' && cell != null;
      }
      function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
          try {
            var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
            var firstSheetName = workbook.SheetNames[0];
            var worksheet = workbook.Sheets[firstSheetName];
            var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
            var filteredData = jsonData.filter(row => row.some(filledCell));
            var headerRowIndex = filteredData.findIndex((row, index) =>
              row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
            );
            if (headerRowIndex === -1 || headerRowIndex > 25) {
              headerRowIndex = 0;
            }
            var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex));
            csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
            return csv;
          } catch (e) {
            console.error(e);
            return "";
          }
        }
        return gk_fileData[filename] || "";
      }
    </script>
  </div>
</body>
</html>